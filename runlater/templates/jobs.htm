
{% extends 'base.html' %}

{% block content %}

    <button>Add Job</button> Search: <input type="text" id="search" value="{{ search_term }}">

    <select id="job_page_selector">
        {% for page in pages %}
            <option value="{{ page }}" {% if page == current_page %} selected {% endif %} >{{ page }}</option>
        {% endfor %}
    </select> of page {{ pages|length }}

    <br><br>

    <table cellpadding="10px;" border="0" id="jobs" border='1'>
        <thead>
            <th>ID</th>
            <th>TYPE</th>
            <th>COMMAND</th>
            <th>CREATED</th>
            <th>DESCRIPTION</th>
            <th>PATH</th>
            <th>PARAMETERS</th>
        </thead>
    </table>

    <script>

        $(document).ready(function(){
            $.getScript("/static/utils.js", function(){
                load_jobs({'search': '{{ search_term }}', 'page': {{ current_page }}});
            });

            $("#job_page_selector").change(function(val) {
                window.location = '/dashboard/jobs/?page=' + val.currentTarget.value + "&search={{ search_term }}";
            });
            $("#search").change(function(val) {
                window.location = '/dashboard/jobs/?page={{ current_page }}&search=' + val.currentTarget.value + "#search";
            });
        });

    </script>


{% endblock %}